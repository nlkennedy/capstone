(this["webpackJsonpscoring-app"]=this["webpackJsonpscoring-app"]||[]).push([[0],{44:function(e,a,t){},67:function(e,a,t){},76:function(e,a,t){"use strict";t.r(a);var n=t(1),s=t.n(n),c=t(36),l=t.n(c),i=(t(44),t(3)),o=t(4),r=t(6),d=t(5),m=t(38),h=t(7),j=t(0),b=function(e){Object(r.a)(t,e);var a=Object(d.a)(t);function t(){return Object(i.a)(this,t),a.apply(this,arguments)}return Object(o.a)(t,[{key:"render",value:function(){return Object(j.jsxs)("header",{children:[Object(j.jsx)("link",{rel:"stylesheet",href:"https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css",integrity:"sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2",crossOrigin:"anonymous"}),Object(j.jsx)("script",{src:"https://code.jquery.com/jquery-3.5.1.slim.min.js",integrity:"sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj",crossOrigin:"anonymous"}),Object(j.jsx)("script",{src:"https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.bundle.min.js",integrity:"sha384-ho+j7jyWK8fNQe+A12Hb8AhRq26LrZ/JpcUGGOn+Y7RsweNrtN/tE3MoK7ZeZDyx",crossOrigin:"anonymous"})]})}}]),t}(s.a.Component),u=t.p+"static/media/logo.8b4496ad.png",A=function(e){Object(r.a)(t,e);var a=Object(d.a)(t);function t(){return Object(i.a)(this,t),a.apply(this,arguments)}return Object(o.a)(t,[{key:"render",value:function(){return Object(j.jsx)("nav",{className:"navbar navbar-custom",children:Object(j.jsxs)("a",{className:"navbar-brand navbar-text",href:"/",children:[Object(j.jsx)("img",{id:"logo",src:u,width:"50",height:"30",className:"d-inline-block align-top",alt:""}),"IntelliSquash"]})})}}]),t}(s.a.Component),p=t(13),g=t.n(p);t(63).config();var O=g.a.create({baseURL:"https://intellisquash.herokuapp.com/",xsrfCookieName:"csrftoken",xsrfHeaderName:"X-CSRFToken"}),y=function(e){Object(r.a)(t,e);var a=Object(d.a)(t);function t(){var e;Object(i.a)(this,t);for(var n=arguments.length,s=new Array(n),c=0;c<n;c++)s[c]=arguments[c];return(e=a.call.apply(a,[this].concat(s))).state={team_matches:[]},e}return Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this;O.get("api/teammatches-summary").then((function(a){var t=a.data.reverse();e.setState({team_matches:t})}))}},{key:"render",value:function(){return Object(j.jsxs)("div",{children:[Object(j.jsx)("div",{id:"wrap",children:Object(j.jsxs)("div",{id:"main",className:"container clear-top",style:{marginTop:"5%"},children:[Object(j.jsx)("div",{className:"justify-content-center",children:Object(j.jsx)("a",{className:"btn-custom btn btn-secondary btn-lg",href:"/create-matchup",role:"button",children:"New Team Matchup"})}),Object(j.jsxs)("div",{children:[Object(j.jsx)("h4",{style:{marginTop:"5%"},children:"Incomplete Team Matchups"}),Object(j.jsxs)("table",{className:"table table-hover table-striped",children:[Object(j.jsx)("thead",{children:Object(j.jsxs)("tr",{children:[Object(j.jsx)("th",{className:"w-40",scope:"col",children:"Home Team"}),Object(j.jsx)("th",{className:"w-40",scope:"col",children:"Away Team"}),Object(j.jsx)("th",{className:"w-20",scope:"col",children:"Date"})]})}),Object(j.jsx)("tbody",{children:this.state.team_matches.map((function(e,a){return!e.done&&Object(j.jsxs)("tr",{className:"hover",onClick:function(){return window.location="/matchup/"+e.pk},children:[Object(j.jsx)("td",{children:e.home_team_name}),Object(j.jsx)("td",{children:e.away_team_name}),Object(j.jsx)("td",{children:e.date_played})]},"teammatch-"+e.pk)}))})]})]}),Object(j.jsxs)("div",{children:[Object(j.jsx)("h4",{style:{marginTop:"5%"},children:"Completed Team Matchups"}),Object(j.jsxs)("table",{className:"table table-hover table-striped",children:[Object(j.jsx)("thead",{children:Object(j.jsxs)("tr",{children:[Object(j.jsx)("th",{className:"w-40",scope:"col",children:"Home Team"}),Object(j.jsx)("th",{className:"w-40",scope:"col",children:"Away Team"}),Object(j.jsx)("th",{className:"w-20",scope:"col",children:"Date"})]})}),Object(j.jsx)("tbody",{children:this.state.team_matches.map((function(e,a){return e.done&&Object(j.jsxs)("tr",{className:"hover",onClick:function(){return window.location="/matchup/"+e.pk},children:[Object(j.jsx)("td",{children:e.home_team_name}),Object(j.jsx)("td",{children:e.away_team_name}),Object(j.jsx)("td",{children:e.date_played})]},"teammatch-"+e.pk)}))})]})]})]})}),Object(j.jsx)("footer",{className:"footer",children:Object(j.jsx)("a",{className:"nav-link",href:"/about",children:"About"})})]})}}]),t}(s.a.Component),v=function(e){Object(r.a)(t,e);var a=Object(d.a)(t);function t(){return Object(i.a)(this,t),a.apply(this,arguments)}return Object(o.a)(t,[{key:"render",value:function(){return Object(j.jsxs)("div",{children:[Object(j.jsx)("div",{id:"wrap",children:Object(j.jsxs)("div",{id:"main",className:"container",style:{marginTop:"5%"},children:[Object(j.jsx)("h1",{children:" About "}),Object(j.jsxs)("div",{style:{marginTop:"2%",marginRight:"20%",marginLeft:"20%"},children:[Object(j.jsx)("p",{children:"This app is a squash game scoring app originally built for the Tufts Squash team. This application scores and tracks all games, and our main feature is a machine learning model that uses live video to read referee hand signals to aid in scoring the games."}),Object(j.jsx)("p",{children:"This app was built by Ben Bodine, Harsh Prajapati, Nicole Kennedy, and Radhika Joshi for Tufts Senior Capstone 2020 - 2021."})]})]})}),Object(j.jsx)("footer",{className:"footer",children:Object(j.jsx)("a",{className:"nav-link",href:"/",children:"Back to Home"})})]})}}]),t}(s.a.Component),x=t(14),f=t(25),w=t(2),N=function(e){Object(r.a)(t,e);var a=Object(d.a)(t);function t(e){var n;return Object(i.a)(this,t),(n=a.call(this,e)).handleSubmit=function(e){e.preventDefault();var a=/[^a-zA-Z0-9 ]/g;if(n.state.homeTeam.match(a)||n.state.awayTeam.match(a))n.openValidationModal("Only characters A-Z, a-z and 0-9, are allowed.");else if(""!==n.state.homeTeam&&""!==n.state.awayTeam){for(var t=0;t<9;t++){if(""===n.state.homePlayers[t]||""===n.state.awayPlayers[t]||""===n.state.courts[t])return void n.openValidationModal("All fields are required.");if(n.state.homePlayers[t].match(a)||n.state.awayPlayers[t].match(a))return void n.openValidationModal("Only characters A-Z, a-z and 0-9, are allowed.");if(!Number.isInteger(+n.state.courts[t]))return void n.openValidationModal("Court number must be an integer.")}for(var s=[],c=0;c<9;c++){var l={home_player:n.state.homePlayers[c],away_player:n.state.awayPlayers[c],court_number:n.state.courts[c],match_rank:c+1};s.push(l)}var i={home_team_name:n.state.homeTeam,away_team_name:n.state.awayTeam,matches:s};O.post("api/teammatches-all",i).then((function(e){var a=e.data.team_match_id;window.location.href="/matchup/"+a}),(function(e){console.log(e)}))}else n.openValidationModal("All fields are required.")},n.state={homeTeam:"Tufts",awayTeam:"Bowdoin",homePlayers:["homeA","homeB","homeC","homeD","homeE","homeF","homeG","homeH","homeI"],awayPlayers:["awayA","awayB","awayC","awayD","awayE","awayF","awayG","awayH","awayI"],courts:[1,2,3,4,5,6,7,8,9]},n.handleInputChange=n.handleInputChange.bind(Object(w.a)(n)),n.handleTitleInputChange=n.handleTitleInputChange.bind(Object(w.a)(n)),n.openValidationModal=n.openValidationModal.bind(Object(w.a)(n)),n.closeValidationModal=n.closeValidationModal.bind(Object(w.a)(n)),n}return Object(o.a)(t,[{key:"handleTitleInputChange",value:function(e){var a=e.target,t=a.value,n=a.name;this.setState(Object(f.a)({},n,t))}},{key:"handleInputChange",value:function(e){var a=e.target,t=a.value,n=a.name.split("/"),s=n[1],c=n[0],l=this.state[c].slice();l[s]=t,this.setState(Object(f.a)({},c,l))}},{key:"openValidationModal",value:function(e){this.setState({validationMessage:e}),document.getElementById("backdrop").style.display="block",document.getElementById("validationModal").style.display="block",document.getElementById("validationModal").className+="show"}},{key:"closeValidationModal",value:function(){document.getElementById("backdrop").style.display="none",document.getElementById("validationModal").style.display="none",document.getElementById("validationModal").className+=document.getElementById("validationModal").className.replace("show","")}},{key:"render",value:function(){var e=this;return Object(j.jsxs)("div",{className:"container",children:[Object(j.jsx)("h1",{style:{marginTop:"5%",marginBottom:"5%"},children:"New Team Matchup"}),Object(j.jsxs)("form",{className:"form-box",onSubmit:this.handleSubmit,children:[Object(j.jsxs)("div",{className:"matchup-row form-row",children:[Object(j.jsx)("div",{className:"col-sm-1",children:Object(j.jsx)("h4",{children:"#"})}),Object(j.jsx)("div",{className:"col-sm-4",children:Object(j.jsx)("div",{className:"form-group",children:Object(j.jsx)("input",{name:"homeTeam",type:"text",className:"form-control",placeholder:"Home Team",value:this.state.homeTeam,onChange:this.handleTitleInputChange})})}),Object(j.jsx)("div",{className:"col-sm-4",children:Object(j.jsx)("div",{className:"form-group",children:Object(j.jsx)("input",{name:"awayTeam",type:"text",className:"form-control",placeholder:"Away Team",value:this.state.awayTeam,onChange:this.handleTitleInputChange})})}),Object(j.jsx)("div",{className:"col-sm-3",children:Object(j.jsx)("h4",{children:"Court"})})]}),Object(x.a)(Array(9)).map((function(a,t){return Object(j.jsxs)("div",{className:"form-row",children:[Object(j.jsx)("div",{className:"col-sm-1 form-group",children:Object(j.jsx)("h4",{children:t+1})}),Object(j.jsx)("div",{className:"col-sm-4 form-group",children:Object(j.jsx)("input",{name:"homePlayers/"+t,type:"text",className:"form-control",placeholder:"Home Player "+(t+1),value:e.state.homePlayers[t],onChange:e.handleInputChange})}),Object(j.jsx)("div",{className:"col-sm-4 form-group",children:Object(j.jsx)("input",{name:"awayPlayers/"+t,type:"text",className:"form-control",placeholder:"Away Player "+(t+1),value:e.state.awayPlayers[t],onChange:e.handleInputChange})}),Object(j.jsx)("div",{className:"col-sm-3 form-group",children:Object(j.jsx)("input",{name:"courts/"+t,type:"text",className:"form-control",placeholder:"#",value:e.state.courts[t],onChange:e.handleInputChange})})]},"match"+t)})),Object(j.jsx)("div",{style:{marginTop:"2%",marginBottom:"2%"},children:Object(j.jsx)("button",{type:"submit",className:"btn btn-secondary",children:"Create"})})]}),Object(j.jsx)("div",{className:"modal fade",id:"validationModal",tabIndex:"-1","aria-labelledby":"validationModalLabel","aria-modal":"true",role:"dialog",children:Object(j.jsx)("div",{className:"modal-dialog",role:"document",children:Object(j.jsxs)("div",{className:"modal-content",children:[Object(j.jsxs)("div",{className:"modal-header",children:[Object(j.jsx)("h5",{className:"modal-title",id:"validationModalLabel",children:"Please review your submission."}),Object(j.jsx)("button",{type:"button",className:"close","aria-label":"Close",onClick:this.closeValidationModal,children:Object(j.jsx)("span",{"aria-hidden":"true",children:"\xd7"})})]}),Object(j.jsx)("div",{className:"modal-body text-left",children:this.state.validationMessage}),Object(j.jsx)("div",{className:"modal-footer",children:Object(j.jsx)("button",{type:"button",className:"btn btn-secondary",onClick:this.closeValidationModal,children:"OK"})})]})})}),Object(j.jsx)("div",{className:"modal-backdrop fade show",id:"backdrop",style:{display:"none"}})]})}}]),t}(s.a.Component),_=t(16),k=t.n(_),S=t(21),I=t(20),C=function(e){Object(r.a)(t,e);var a=Object(d.a)(t);function t(e){var n;return Object(i.a)(this,t),(n=a.call(this,e)).state={info:{},matches:[]},n.handleBeginGame=n.handleBeginGame.bind(Object(w.a)(n)),n.handleContinueGame=n.handleContinueGame.bind(Object(w.a)(n)),n}return Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=Object(I.a)(k.a.mark((function e(){var a,t,n,s,c;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=[],t=this,e.next=4,Promise.all([O.get("api/matches-summary",{params:{team_match_id:window.location.pathname.split("/")[2]}})]);case 4:n=e.sent,s=Object(S.a)(n,1),c=s[0],g.a.all(c.data.matches.map((function(e){return O.get("api/games-summary",{params:{match_id:e.pk}})}))).then(g.a.spread((function(){for(var e=arguments.length,n=new Array(e),s=0;s<e;s++)n[s]=arguments[s];a=n.map((function(e){return e.data}));var l=c.data.matches.map((function(e,t){return e.games=a[t].sort((function(e,a){return e.game_number>a.game_number?1:-1})),e}));t.setState({info:c.data,matches:l})})));case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"handleBeginGame",value:function(e,a,t){t.preventDefault();var n={match_id:e,game_number:a};O.post("api/games",n).then((function(e){var a=e.data.game_id;window.location.href="/game/"+a+"/scoring"}),(function(e){console.log(e)}))}},{key:"handleContinueGame",value:function(e,a){a.preventDefault(),window.location.href="/game/"+e+"/scoring"}},{key:"render",value:function(){var e=this;return Object(j.jsxs)("div",{children:[Object(j.jsx)("div",{id:"wrap",children:Object(j.jsxs)("div",{id:"main",className:"container",children:[Object(j.jsx)("h1",{style:{marginTop:"5%"},children:"Matchup"}),Object(j.jsxs)("h2",{style:{marginBottom:"5%"},children:[this.state.info.home_team_name," vs"," ",this.state.info.away_team_name," "]}),Object(j.jsxs)("table",{className:"table table-bordered",children:[Object(j.jsx)("thead",{children:Object(j.jsxs)("tr",{children:[Object(j.jsx)("th",{className:"w-5 matchup-header",scope:"col",children:"#"}),Object(j.jsx)("th",{className:"w-25 team1-winner",scope:"col",children:this.state.info.home_team_name}),Object(j.jsx)("th",{className:"w-40 matchup-header",scope:"col",children:"Game"}),Object(j.jsx)("th",{className:"w-25 team2-winner",scope:"col",children:this.state.info.away_team_name}),Object(j.jsx)("th",{className:"w-5 matchup-header",scope:"col",children:"Court"})]})}),Object(j.jsx)("tbody",{children:this.state.matches.map((function(a){return Object(j.jsxs)("tr",{children:[Object(j.jsxs)("th",{scope:"row",children:[" ",a.match_rank," "]}),Object(j.jsxs)("td",{className:a.done&&a.home_player_score>a.away_player_score?"team1-winner":"",children:[" ",a.home_player_name," "]}),Object(j.jsxs)("td",{children:[a.games.length>0&&Object(j.jsx)("table",{className:"table table-sm table-bordered table-game-sum table-fixed",children:Object(j.jsxs)("tbody",{children:[Object(j.jsxs)("tr",{children:[a.games.map((function(e){return Object(j.jsx)("td",{className:e.done&&e.home_player_score>e.away_player_score?"team1-winner":"",width:"20%",children:e.home_player_score},"game-"+e.pk)})),a.games.length<5&&Object(x.a)(Array(5-a.games.length)).map((function(e,t){return Object(j.jsx)("td",{width:"20%"},"game-filler-home-"+a.pk+"-"+t)}))]}),Object(j.jsxs)("tr",{children:[a.games.map((function(e){return Object(j.jsx)("td",{className:e.done&&e.home_player_score<e.away_player_score?"team2-winner":"",width:"20%",children:e.away_player_score},"game-"+e.pk)})),a.games.length<5&&Object(x.a)(Array(5-a.games.length)).map((function(e,t){return Object(j.jsx)("td",{width:"20%"},"game-filler-away-"+a.pk+"-"+t)}))]})]})}),!a.done&&(0===a.games.length||a.games[a.games.length-1].done)&&Object(j.jsx)("button",{type:"button",className:"btn btn-outline-secondary m-2",onClick:function(t){return e.handleBeginGame(a.pk,0===a.games.length?1:a.games.length+1,t)},children:"BEGIN MATCH"}),!a.done&&a.games.length>0&&!a.games[a.games.length-1].done&&Object(j.jsx)("button",{type:"button",className:"btn btn-outline-secondary m-2",onClick:function(t){return e.handleContinueGame(a.games[a.games.length-1].pk,t)},children:"CONTINUE MATCH"})]}),Object(j.jsxs)("td",{className:a.done&&a.home_player_score<a.away_player_score?"team2-winner":"",children:[" ",a.away_player_name," "]}),Object(j.jsxs)("td",{children:[" ",a.court_number," "]})]},"match-"+a.pk)}))})]})]})}),Object(j.jsxs)("footer",{className:"footer",children:[Object(j.jsx)("a",{className:"nav-link",href:"/matchup/"+this.state.info.pk+"/summary",rel:"noreferrer",target:"_blank",children:"Match Summary View"}),Object(j.jsx)("a",{className:"nav-link",href:"/",children:"Back to Home"})]})]})}}]),t}(s.a.Component),M="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIABAMAAAAGVsnJAAAAElBMVEUAAAAAAAAAAAAAAAAAAAAAAADgKxmiAAAABXRSTlMAZnq61vTacjsAAAH7SURBVHja7dpLDYAwFETRFgUNCvg4QENxQP1bwcDrriQkPVfALM56UpIkSZIkSZIkSZIkSZIkSZIkSZIkSZIkSZIkSZIkSZIkSZKkXrkGlYkAlha0AQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACATusxpDMCuMZs758C3O33PQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAR0lXWQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACYDSDXoJIkSZIkSZIkSZIkSZIkSZIkSZIkSZIkSZIkSZIkSZIkSZIkqdcLGuVCW7PJm8oAAAAASUVORK5CYII=",B=t(37),T=t.n(B),P=function(e){Object(r.a)(t,e);var a=Object(d.a)(t);function t(e){var n;return Object(i.a)(this,t),(n=a.call(this,e)).setRef=function(e){n.webcam=e},n.state={game:{},match:{},match_done:!1,points:[],selection:{team:"home",side:"R"},prev_point:"",webcamEnabled:!1,images:[],interval:null,ref_call:""},n.handleScorePlusOne=n.handleScorePlusOne.bind(Object(w.a)(n)),n.handleBeginNextGame=n.handleBeginNextGame.bind(Object(w.a)(n)),n.handleServeChange=n.handleServeChange.bind(Object(w.a)(n)),n.handleRefereeCall=n.handleRefereeCall.bind(Object(w.a)(n)),n.updateDimensions=n.updateDimensions.bind(Object(w.a)(n)),n.handleLoad=n.handleLoad.bind(Object(w.a)(n)),n.getInitialPointsState=n.getInitialPointsState.bind(Object(w.a)(n)),n.removePointsState=n.removePointsState.bind(Object(w.a)(n)),n.updatePointsState=n.updatePointsState.bind(Object(w.a)(n)),n.removeScoreboardState=n.removeScoreboardState.bind(Object(w.a)(n)),n.updateScoreboardState=n.updateScoreboardState.bind(Object(w.a)(n)),n.updateScoreboardLocation=n.updateScoreboardLocation.bind(Object(w.a)(n)),n.updatePredictionState=n.updatePredictionState.bind(Object(w.a)(n)),n.openWebcamModal=n.openWebcamModal.bind(Object(w.a)(n)),n.closeWebcamModal=n.closeWebcamModal.bind(Object(w.a)(n)),n.handleUndo=n.handleUndo.bind(Object(w.a)(n)),n.takeImage=n.takeImage.bind(Object(w.a)(n)),n.handlePrediction=n.handlePrediction.bind(Object(w.a)(n)),n}return Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this,a=window.location.pathname.split("/")[2];O.get("api/games",{params:{game_id:a}}).then((function(t){var n=t.data;e.setState({game:n.game_data,match:n.match_data,points:e.getInitialPointsState(a)}),window.addEventListener("load",e.handleLoad),window.addEventListener("resize",e.updateDimensions),e.updateDimensions(),e.updateScoreboardState(a)}))}},{key:"componentWillUnmount",value:function(){window.removeEventListener("load",this.handleLoad),window.removeEventListener("resize",this.updateDimensions),this.removeScoreboardState()}},{key:"componentDidUpdate",value:function(){this.updateDimensions()}},{key:"handleLoad",value:function(){this.updateDimensions()}},{key:"updateDimensions",value:function(){document.getElementById("scrollable").style.height="0px";var e=document.getElementById("target").clientHeight;e<400&&(document.getElementById("scrollable").style.height=e+"px")}},{key:"updatePredictionState",value:function(e,a){localStorage.setItem("prediction-"+e,JSON.stringify(a))}},{key:"getInitialPointsState",value:function(e){return JSON.parse(localStorage.getItem("points-"+e))||[]}},{key:"removePointsState",value:function(e){localStorage.removeItem("points-"+e)}},{key:"updatePointsState",value:function(e,a){this.setState({points:a}),localStorage.setItem("points-"+e,JSON.stringify(a))}},{key:"removeScoreboardState",value:function(){var e=this.state.game.game_id;localStorage.removeItem("game-"+e),localStorage.removeItem("match-"+e)}},{key:"updateScoreboardState",value:function(e){localStorage.setItem("game-"+e,JSON.stringify(this.state.game)),localStorage.setItem("match-"+e,JSON.stringify(this.state.match))}},{key:"updateScoreboardLocation",value:function(e){var a=this.state.game.game_id;localStorage.setItem("newgame-"+a,e)}},{key:"not",value:function(e){return"R"===e?"L":"L"===e?"R":"home"===e?"away":"away"===e?"home":void 0}},{key:"updateSelection",value:function(e){var a=this.state.selection;a.team===e?a.side=this.not(a.side):(a.side="R",a.team=this.not(a.team));var t=a.team+"-"+a.side;this.updateServeButtons(t),this.setState({selection:a})}},{key:"gameOver",value:function(e){var a=Math.abs(e.home_player_score-e.away_player_score)>=2;return(e.home_player_score>=11||e.away_player_score>=11)&&a}},{key:"handleScorePlusOne",value:function(e,a){a&&a.preventDefault();var t=this.state.game;if(!t.done&&!this.gameOver(t)){t[e]+=1;var n=e.split("_")[0];this.updateSelection(n);var s=t[e]+this.state.selection.side,c=this.state.points;if("home"===n?c.push([s,""]):c.push(["",s]),this.updatePointsState(t.game_id,c),this.updateScoreboardState(t.game_id),this.gameOver(t)){t.done=!0,this.removePointsState(t.game_id),this.removeScoreboardState(t.game_data);var l=this.state.match;l[t.home_player_score>t.away_player_score?"home_player_score":"away_player_score"]+=1,(l.home_player_score>=3||l.away_player_score>=3)&&(l.done=!0),this.setState({match:l,match_done:!0}),O.patch("api/matches",l).then((function(e){}),(function(e){console.log(e)}))}}this.setState({game:t,prev_point:e}),O.patch("api/games",this.state.game).then((function(e){}),(function(e){console.log(e)}))}},{key:"handleUndo",value:function(e){var a=this.state.prev_point,t=this.state.game,n=this.state.points;n.pop(),t[a]-=1,this.setState({game:t,points:n,prev_point:""}),this.updatePointsState(t.game_id,n),this.updateScoreboardState(t.game_id)}},{key:"handleBeginNextGame",value:function(e,a,t){var n=this;t.preventDefault();var s={match_id:e,game_number:a};O.post("api/games",s).then((function(e){var a=e.data.game_id;n.updateScoreboardLocation(a),window.location.href="/game/"+a+"/scoring"}),(function(e){console.log(e)}))}},{key:"updateServeButtons",value:function(e){for(var a=document.getElementsByClassName("serve-change"),t=0;t<a.length;t++)a[t].classList.remove("shaded-blue");document.getElementById(e).classList.add("shaded-blue")}},{key:"handleServeChange",value:function(e){var a=e.target.id.split("-"),t=this.state.selection;t.team=a[0],t.side=a[1],this.setState({selection:t}),this.updateServeButtons(e.target.id)}},{key:"capture",value:function(){return this.webcam.getScreenshot()}},{key:"takeImage",value:function(){if(this.state.images.length>50)clearInterval(this.state.interval),document.getElementById("processing").style.display="block",this.handlePrediction();else{var e=this.state.images;e.push(this.capture()),this.setState({images:e})}}},{key:"handlePrediction",value:function(){var e=this,a={images:this.state.images};O.post("api/predict_ref_signal",a).then((function(a){var t,n=e.state.ref_call,s=e.state.game.game_id,c={call:a.data.prediction,team:e.state.match[n+"_team_name"]};document.getElementById("processing").style.display="none","inconclusive"===c.call?(t="Your prediction was inconclusive. Please select OK to try again.",window.confirm(t)?e.handleRefereeCall(n):e.closeWebcamModal(!0)):(t="Here is your prediction: "+c.call+"\n\nPlease select OK if the prediction looks correct. Otherwise, press cancel and input your prediction again.",window.confirm(t)?("STROKE"===c.call?e.handleScorePlusOne(n+"_player_score",null):"NO LET"===c.call&&e.handleScorePlusOne(e.not(n)+"_player_score",null),e.updatePredictionState(s,c),e.closeWebcamModal(!1)):e.handleRefereeCall(n))}),(function(e){console.log(e)}))}},{key:"handleRefereeCall",value:function(e){var a=this;this.setState({ref_call:e}),this.setState({images:[]},(function(){var e=setInterval(a.takeImage.bind(a),50);a.setState({interval:e})}))}},{key:"openWebcamModal",value:function(e,a){var t=arguments;this.setState({webcamEnabled:!0},(function(){var e=t[2];document.getElementById("backdrop").style.display="block",document.getElementById("webcamModal").style.display="block",document.getElementById("webcamModal").className+="show",setTimeout(function(){a(e)}.bind(a,e),100)}))}},{key:"closeWebcamModal",value:function(e){document.getElementById("backdrop").style.display="none",document.getElementById("webcamModal").style.display="none",document.getElementById("webcamModal").className+=document.getElementById("webcamModal").className.replace("show",""),this.setState({webcamEnabled:!1}),e&&window.location.reload(!1)}},{key:"render",value:function(){var e=this;return Object(j.jsxs)("div",{children:[Object(j.jsx)("div",{id:"wrap",children:Object(j.jsxs)("div",{id:"main",className:"container",children:[Object(j.jsx)("h1",{style:{marginTop:"5%",marginBottom:"5%"},children:"Game Scoring"}),Object(j.jsxs)("div",{className:"container",style:{paddingRight:"10%",paddingLeft:"10%"},children:[Object(j.jsxs)("div",{className:"row",children:[Object(j.jsx)("div",{className:"col-4",children:Object(j.jsx)("h4",{className:"shaded-gray",children:this.state.match.home_team_name})}),Object(j.jsx)("div",{className:"col-4 align-self-center",children:Object(j.jsxs)("h6",{children:[" ",this.state.match.home_player_score," | ",this.state.match.away_player_score," "]})}),Object(j.jsx)("div",{className:"col-4",children:Object(j.jsx)("h4",{className:"shaded-gray",children:this.state.match.away_team_name})})]}),Object(j.jsxs)("div",{className:"row",children:[Object(j.jsx)("div",{className:"col-4",children:Object(j.jsx)("h5",{className:"shaded-gray",children:Object(j.jsx)("span",{children:this.state.match.home_player_name})})}),Object(j.jsx)("div",{className:"col-4 align-self-center",children:Object(j.jsxs)("h1",{children:[this.state.game.home_player_score," |"," ",this.state.game.away_player_score]})}),Object(j.jsx)("div",{className:"col-4",children:Object(j.jsx)("h5",{className:"shaded-gray",children:Object(j.jsx)("span",{children:this.state.match.away_player_name})})})]}),Object(j.jsxs)("div",{className:"row",children:[Object(j.jsxs)("div",{id:"target",className:"col-4",children:[Object(j.jsx)("div",{className:"row",children:Object(j.jsx)("div",{className:"col-12",children:Object(j.jsx)("button",{className:"shaded-gray",onClick:function(a){return e.handleScorePlusOne("home_player_score",a)},children:Object(j.jsx)("img",{src:M,className:"img-fluid w-75",alt:""})})})}),Object(j.jsx)("div",{className:"row",children:Object(j.jsx)("div",{className:"col-12",children:Object(j.jsx)("h3",{id:"home-L",className:"serve-change game-button",type:"button",onClick:this.handleServeChange,children:"L"})})}),Object(j.jsx)("div",{className:"row",children:Object(j.jsx)("div",{className:"col-12",children:Object(j.jsx)("h3",{id:"home-R",className:"serve-change game-button shaded-blue",type:"button",onClick:this.handleServeChange,children:"R"})})})]}),Object(j.jsx)("div",{className:"col-4",children:Object(j.jsx)("div",{id:"scrollable",className:"scrollable",children:Object(j.jsx)("div",{className:"container",children:Object(j.jsx)("h5",{children:this.state.points.map((function(e,a){return Object(j.jsxs)("div",{className:"row",children:[Object(j.jsx)("div",{className:"col-6 text-right",children:e[0]}),Object(j.jsx)("div",{className:"col-6 text-left",children:e[1]})]},"point-"+a)}))})})})}),Object(j.jsxs)("div",{className:"col-4",children:[Object(j.jsx)("div",{className:"row",children:Object(j.jsx)("div",{className:"col-12",children:Object(j.jsx)("button",{className:"shaded-gray",onClick:function(a){return e.handleScorePlusOne("away_player_score",a)},children:Object(j.jsx)("img",{src:M,className:"img-fluid w-75",alt:""})})})}),Object(j.jsx)("div",{className:"row",children:Object(j.jsx)("div",{className:"col-12",children:Object(j.jsx)("h3",{id:"away-L",className:"serve-change game-button",type:"button",onClick:this.handleServeChange,children:"L"})})}),Object(j.jsx)("div",{className:"row",children:Object(j.jsx)("div",{className:"col-12",children:Object(j.jsx)("h3",{id:"away-R",className:"serve-change game-button",type:"button",onClick:this.handleServeChange,children:"R"})})})]})]}),Object(j.jsxs)("div",{className:"row",children:[Object(j.jsx)("div",{className:"col-4",children:Object(j.jsx)("h5",{className:"shaded-orange",type:"button",onClick:function(a){return e.openWebcamModal(a,e.handleRefereeCall,"home")},children:"Referee Call"})}),Object(j.jsxs)("div",{className:"col-4",children:[""!==this.state.prev_point&&!this.state.game.done&&Object(j.jsx)("h5",{className:"shaded-red game-button",type:"button",onClick:this.handleUndo,children:"Undo"}),(""===this.state.prev_point||this.state.game.done)&&Object(j.jsx)("h5",{className:"shaded-red-disabled game-button",children:"Undo"})]}),Object(j.jsx)("div",{className:"col-4",children:Object(j.jsx)("h5",{className:"shaded-orange",type:"button",onClick:function(a){return e.openWebcamModal(a,e.handleRefereeCall,"away")},children:"Referee Call"})})]}),Object(j.jsx)("div",{className:"row",children:Object(j.jsx)("div",{className:"col-12",children:this.state.game.done&&!this.state.match.done&&Object(j.jsxs)("button",{type:"button",className:"btn btn-secondary btn-block btn-lg",onClick:function(a){return e.handleBeginNextGame(e.state.match.match_id,e.state.game.game_number+1,a)},children:["START GAME #",this.state.game.game_number+1]})})})]})]})}),Object(j.jsxs)("footer",{className:"footer",children:[Object(j.jsx)("a",{className:"nav-link",href:"/game/"+this.state.game.game_id+"/scoreboard",rel:"noreferrer",target:"_blank",children:"Scoreboard View"}),Object(j.jsx)("a",{className:"nav-link",href:"/matchup/"+this.state.match.team_match_id,children:"Back to Team Matchup"})]}),this.state.webcamEnabled&&Object(j.jsx)("div",{className:"modal fade",id:"webcamModal",tabIndex:"-1","aria-labelledby":"webcamModalLabel","aria-modal":"true",role:"dialog",children:Object(j.jsx)("div",{className:"modal-dialog modal-lg",role:"document",children:Object(j.jsxs)("div",{className:"modal-content",children:[Object(j.jsxs)("div",{className:"modal-header",children:[Object(j.jsx)("h5",{className:"modal-title",id:"webcamModalLabel",children:"Generating prediction!"}),Object(j.jsx)("button",{type:"button",className:"close","aria-label":"Close",onClick:function(a){return e.closeWebcamModal(!0)},children:Object(j.jsx)("span",{"aria-hidden":"true",children:"\xd7"})})]}),Object(j.jsxs)("div",{className:"modal-body",children:[Object(j.jsx)("div",{className:"text-center scoreboard",children:Object(j.jsx)(T.a,{audio:!1,ref:this.setRef,screenshotFormat:"image/jpeg",videoConstraints:{width:1280,height:720,aspectRatio:1,facingMode:"user"},mirrored:!0,style:{width:"100%"}})}),Object(j.jsx)("div",{id:"processing",style:{display:"none"},children:"Processing..."})]})]})})}),Object(j.jsx)("div",{className:"modal-backdrop fade show",id:"backdrop",style:{display:"none"}})]})}}]),t}(s.a.Component),E=function(e){Object(r.a)(t,e);var a=Object(d.a)(t);function t(e){var n;return Object(i.a)(this,t),(n=a.call(this,e)).state={game:{},match:{},prediction:{}},n.updateStateFromDatabase=n.updateStateFromDatabase.bind(Object(w.a)(n)),n.updateState=n.updateState.bind(Object(w.a)(n)),n.openModal=n.openModal.bind(Object(w.a)(n)),n.closeModal=n.closeModal.bind(Object(w.a)(n)),n}return Object(o.a)(t,[{key:"componentDidMount",value:function(){"undefined"!==typeof window&&window.addEventListener("storage",this.updateState),this.updateState()}},{key:"componentWillUnmount",value:function(){"undefined"!==typeof window&&window.removeEventListener("storage",this.updateState)}},{key:"updateStateFromDatabase",value:function(){var e=this,a=window.location.pathname.split("/")[2];O.get("api/games",{params:{game_id:a}}).then((function(a){var t=a.data;e.setState({game:t.game_data,match:t.match_data})}))}},{key:"updateState",value:function(){var e=window.location.pathname.split("/")[2],a=JSON.parse(localStorage.getItem("game-"+e))||{},t=JSON.parse(localStorage.getItem("match-"+e))||{},n=JSON.parse(localStorage.getItem("prediction-"+e))||{},s=localStorage.getItem("newgame-"+e)||"";0===Object.keys(a).length||0===Object.keys(t).length?this.updateStateFromDatabase():this.setState({game:a,match:t}),0!==Object.keys(n).length&&(this.setState({prediction:n}),this.openModal(),localStorage.removeItem("prediction-"+e)),""!==s&&(localStorage.removeItem("newgame-"+e),window.location.href="/game/"+s+"/scoreboard")}},{key:"openModal",value:function(){document.getElementById("backdrop").style.display="block",document.getElementById("refCallModal").style.display="block",document.getElementById("refCallModal").className+="show",setTimeout(this.closeModal,5e3)}},{key:"closeModal",value:function(){document.getElementById("backdrop").style.display="none",document.getElementById("refCallModal").style.display="none",document.getElementById("refCallModal").className+=document.getElementById("refCallModal").className.replace("show","")}},{key:"render",value:function(){return Object(j.jsxs)("div",{className:"container",style:{marginBottom:"5%"},children:[Object(j.jsx)("h1",{style:{marginTop:"5%",marginBottom:"5%"},children:"Game Scoreboard"}),Object(j.jsxs)("div",{className:"container shaded-gray",children:[Object(j.jsxs)("div",{className:"row",children:[Object(j.jsx)("div",{className:"col-4",children:Object(j.jsx)("h4",{className:"text-left",children:this.state.match.home_team_name})}),Object(j.jsx)("div",{className:"col-4"}),Object(j.jsx)("div",{className:"col-4",children:Object(j.jsx)("h4",{className:"text-right",children:this.state.match.away_team_name})})]}),Object(j.jsxs)("div",{className:"row",children:[Object(j.jsx)("div",{className:"col-5 shaded-dark-gray my-auto pt-2 pb-1",children:Object(j.jsx)("h3",{className:"text-left text-light",children:this.state.match.home_player_name})}),Object(j.jsx)("div",{className:"col-2 align-self-center text-nowrap",children:Object(j.jsxs)("h1",{children:[this.state.match.home_player_score," |"," ",this.state.match.away_player_score]})}),Object(j.jsx)("div",{className:"col-5 shaded-dark-gray my-auto pt-2 pb-1",children:Object(j.jsx)("h3",{className:"text-right text-light",children:this.state.match.away_player_name})})]}),Object(j.jsxs)("div",{className:"row",children:[Object(j.jsx)("div",{className:"col-5 text-center scoreboard",children:this.state.game.home_player_score}),Object(j.jsx)("div",{className:"col-2"}),Object(j.jsx)("div",{className:"col-5 text-center scoreboard",children:this.state.game.away_player_score})]})]}),Object(j.jsxs)("div",{children:[Object(j.jsx)("div",{className:"modal fade",id:"refCallModal",tabIndex:"-1","aria-labelledby":"refCallModalLabel","aria-modal":"true",role:"dialog",children:Object(j.jsx)("div",{className:"modal-dialog",role:"document",children:Object(j.jsxs)("div",{className:"modal-content",children:[Object(j.jsxs)("div",{className:"modal-header",children:[Object(j.jsxs)("h5",{className:"modal-title",id:"refCallModalLabel",children:["Referee Call Requested By"," ",this.state.prediction.team]}),Object(j.jsx)("button",{type:"button",className:"close","aria-label":"Close",onClick:this.closeModal,children:Object(j.jsx)("span",{"aria-hidden":"true",children:"\xd7"})})]}),Object(j.jsx)("div",{className:"modal-body",children:Object(j.jsx)("div",{className:"text-center scoreboard",children:this.state.prediction.call})})]})})}),Object(j.jsx)("div",{className:"modal-backdrop fade show",id:"backdrop",style:{display:"none"}})]})]})}}]),t}(s.a.Component),L=function(e){Object(r.a)(t,e);var a=Object(d.a)(t);function t(e){var n;return Object(i.a)(this,t),(n=a.call(this,e)).state={info:{},matches:[]},n}return Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=Object(I.a)(k.a.mark((function e(){var a,t,n,s,c;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=[],t=this,e.next=4,Promise.all([O.get("api/matches-summary",{params:{team_match_id:window.location.pathname.split("/")[2]}})]);case 4:n=e.sent,s=Object(S.a)(n,1),c=s[0],g.a.all(c.data.matches.map((function(e){return O.get("api/games-summary",{params:{match_id:e.pk}})}))).then(g.a.spread((function(){for(var e=arguments.length,n=new Array(e),s=0;s<e;s++)n[s]=arguments[s];a=n.map((function(e){return e.data}));var l=c.data.matches.map((function(e,t){return e.games=a[t].sort((function(e,a){return e.game_number>a.game_number?1:-1})),e}));t.setState({info:c.data,matches:l})})));case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return Object(j.jsx)("div",{children:Object(j.jsx)("div",{id:"wrap",children:Object(j.jsxs)("div",{id:"main",className:"container",children:[Object(j.jsx)("h1",{style:{marginTop:"5%"},children:"Matchup Summary"}),Object(j.jsxs)("h2",{style:{marginBottom:"5%"},children:[this.state.info.home_team_name," vs"," ",this.state.info.away_team_name," "]}),Object(j.jsxs)("table",{className:"table table-bordered",children:[Object(j.jsx)("thead",{children:Object(j.jsxs)("tr",{children:[Object(j.jsx)("th",{className:"w-25 team1-winner",scope:"col",children:this.state.info.home_team_name}),Object(j.jsx)("th",{className:"w-50 matchup-header",scope:"col",children:"Game"}),Object(j.jsx)("th",{className:"w-25 team2-winner",scope:"col",children:this.state.info.away_team_name})]})}),Object(j.jsx)("tbody",{children:this.state.matches.map((function(e){return Object(j.jsxs)("tr",{children:[Object(j.jsxs)("td",{className:e.done&&e.home_player_score>e.away_player_score?"team1-winner":"",children:[" ",e.home_player_name," "]}),Object(j.jsx)("td",{children:Object(j.jsx)("table",{className:"table table-sm table-bordered table-game-sum table-fixed",children:Object(j.jsxs)("tbody",{children:[Object(j.jsxs)("tr",{children:[e.games.map((function(e){return Object(j.jsx)("td",{className:e.done&&e.home_player_score>e.away_player_score?"team1-winner":"",width:"20%",children:e.home_player_score},"game-"+e.pk)})),e.games.length<5&&Object(x.a)(Array(5-e.games.length)).map((function(a,t){return Object(j.jsx)("td",{className:"text-light",width:"20%",children:"0"},"game-filler-home-"+e.pk+"-"+t)}))]}),Object(j.jsxs)("tr",{children:[e.games.map((function(e){return Object(j.jsx)("td",{className:e.done&&e.home_player_score<e.away_player_score?"team2-winner":"",width:"20%",children:e.away_player_score},"game-"+e.pk)})),e.games.length<5&&Object(x.a)(Array(5-e.games.length)).map((function(a,t){return Object(j.jsx)("td",{className:"text-light",width:"20%",children:"0"},"game-filler-away-"+e.pk+"-"+t)}))]})]})})}),Object(j.jsxs)("td",{className:e.done&&e.home_player_score<e.away_player_score?"team2-winner":"",children:[" ",e.away_player_name," "]})]},"match-"+e.pk)}))})]})]})})})}}]),t}(s.a.Component),R=function(e){Object(r.a)(t,e);var a=Object(d.a)(t);function t(){return Object(i.a)(this,t),a.apply(this,arguments)}return Object(o.a)(t,[{key:"render",value:function(){return Object(j.jsxs)("div",{style:{marginTop:"10%"},children:[Object(j.jsx)("h1",{children:"404 Not Found"}),Object(j.jsx)("a",{className:"nav-link",href:"/",children:"Back to Home"})]})}}]),t}(s.a.Component),D=(t(67),function(e){Object(r.a)(t,e);var a=Object(d.a)(t);function t(){return Object(i.a)(this,t),a.apply(this,arguments)}return Object(o.a)(t,[{key:"render",value:function(){return Object(j.jsx)(m.a,{children:Object(j.jsxs)("div",{className:"App",children:[Object(j.jsx)(b,{}),Object(j.jsx)(A,{}),Object(j.jsxs)(h.c,{children:[Object(j.jsx)(h.a,{exact:!0,path:"/",component:y}),Object(j.jsx)(h.a,{exact:!0,path:"/about",component:v}),Object(j.jsx)(h.a,{exact:!0,path:"/create-matchup",component:N}),Object(j.jsx)(h.a,{exact:!0,path:"/matchup/:team_matchup_id",component:C}),Object(j.jsx)(h.a,{exact:!0,path:"/game/:game_id/scoring",component:P}),Object(j.jsx)(h.a,{exact:!0,path:"/game/:game_id/scoreboard",component:E}),Object(j.jsx)(h.a,{exact:!0,path:"/matchup/:team_matchup_id/summary",component:L}),Object(j.jsx)(h.a,{component:R})]})]})})}}]),t}(s.a.Component)),Z=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,77)).then((function(a){var t=a.getCLS,n=a.getFID,s=a.getFCP,c=a.getLCP,l=a.getTTFB;t(e),n(e),s(e),c(e),l(e)}))};l.a.render(Object(j.jsx)(s.a.StrictMode,{children:Object(j.jsx)(D,{})}),document.getElementById("root")),Z()}},[[76,1,2]]]);
//# sourceMappingURL=main.ac0f8bad.chunk.js.map